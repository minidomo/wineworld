all: lint format type-check

type-check:
	mypy .

lint:
	ruff check . --fix

format:
	black --line-length 120 .

build-server:
	docker build -t wineworld-backend-dev -f docker/server/Dockerfile .

server:
	docker run --rm -p 4000:4000 wineworld-backend-dev

server-background:
	docker run --rm -d -p 4000:4000 wineworld-backend-dev

wineworld-service:
	make server

# stops the docker container the server is running on if applicable
stop-server:
	python3 -m scripts.stop_server

# model options:
# 	wine - deals with wines
# 	vineyard - deals with vineyards
# 	region - deals with regions
# type options:
# 	raw - uses API calls to obtain the data, and writes it to a file
# 	modify - reads the file generated by type=raw, modifies the data, and writes it to a new file
scrape:
	python3 -m scripts.scrape.$(model)_script ${type}